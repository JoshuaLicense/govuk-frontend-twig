{% macro govukErrorSummary(params) %}
<div class="govuk-error-summary
  {%- if params.classes is defined and params.classes is not null %} {{ params.classes }}{% endif %}"
  {%- if params.disableAutoFocus is defined %} data-disable-auto-focus="{{ params.disableAutoFocus ? 'true' : 'false' }}"{% endif %}
  {%- for attribute, value in params.attributes ?? [] %} {{ attribute }}="{{ value }}"{% endfor %} data-module="govuk-error-summary">
  {# Keep the role="alert" in a seperate child container to prevent a race condition between
  the focusing js at the alert, resulting in information getting missed in screen reader announcements #}

  <div role="alert">
    <h2 class="govuk-error-summary__title">
      {{ params.titleHtml is defined and params.titleHtml is not null ? params.titleHtml | raw : params.titleText }}
    </h2>
    <div class="govuk-error-summary__body">
      {% if params.descriptionHtml is defined or params.descriptionText is defined %}
        <p>
          {{ params.descriptionHtml is defined and params.descriptionHtml is not null ? params.descriptionHtml | raw : params.descriptionText }}
        </p>
      {% endif %}
      <ul class="govuk-list govuk-error-summary__list">
        {% for item in params.errorList ?? [] %}
          <li>
          {% if item.href is defined and item.href is not null %}
            <a href="{{ item.href }}"{% for attribute, value in item.attributes ?? [] %} {{attribute}}="{{value}}"{% endfor %}>{{ item.html is defined and item.html is not null ? item.html | raw : item.text }}</a>
          {% else %}
            {{ item.html is defined and item.html is not null ? item.html | raw : item.text }}
          {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endmacro %}
